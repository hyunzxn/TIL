# 1. CSR vs SSR

## CSR

- 브라우저가 렌더링을 담당한다.
  - 렌더링은 쉽게 풀어보면 리액트 코드를 브라우저가 이해할 수 있는 HTML 코드로 변환하는 것이다.
  - 렌더링 되기 전에는 브라우저에는 **아무런 HTML 코드도 없는 상태**이다.
    - 화면에 HTML 을 그리기 위해서는 브라우저의 자바스크립트 엔진이 자바스크립트 파일을 모두 다운로드 해야한다.
    - 다운로드가 완료되기까지 찰나의 시간 동안 화면이 빈(Empty) 상태가 된다는 부작용이 있다.
    - 사용자가 자바스크립트를 비활성화 해놨거나(~~이상한 사람~~), 데이터 통신 상태가 불안정한 곳에서는 자바스크립트 파일을 다운로드 하는데 장애가 생길 수 있기 때문에 렌더링을 아예 못 하거나, 하는데 더 많은 시간이 소요될 수 있다.
- 순수 리액트만 사용해서 만든 애플리케이션이 CSR 방식이다.

&nbsp;

## SSR

- 서버가 렌더링을 담당한다.
  - 서버가 HTML 을 다 렌더링해서 브라우저의 request 의 response 로 보내준다.
  - 사용자가 화면을 보려고 하는 시점에 이미 HTML 이 다 그려진 상태이기 때문에 순간적으로 화면이 빈(Empty) 상태가 될 일이 없다.
  - 자바스크립트 파일을 다운로드 하는 것을 기다릴 필요가 없다. 데이터 통신 상태에 관계없이 화면을 빨리 볼 수 있다.
- SEO 에 유리하다.
  - SEO 는 HTML 을 기준으로 한다. CSR 방식은 자바스크립트 파일이 다운로드 되기 전까지는 화면에는 아무런 HTML 코드가 없는 것이기 때문에 검색 엔진이 해당 페이지를 없는 것으로 간주하여 노출이 잘 안 될 수 있다.

<br>

> **⭐️중요 포인트**
>
>  NextJS로 만든 모든 컴포넌트들은 기본적으로 SSR이 원칙이다. 컴포넌트에 설사 "use client" 가 붙어있다고 하더라도 SSR이 원칙이다. 

&nbsp;

# 2. Hydration 이란?

앞서 SSR 을 하게 되면 서버에서 HTML 을 렌더링해서 브라우저에게 보내게 된다는 것을 알았다. 그런데 브라우저에 보내진 HTML 은 동적인 요소 없이 순수한 UI 만 그려진 것이다. `Hydration` 은 동적인 요소가 없는 순수한 HTML 에 동적인 요소를 넣어서 Application 스럽게 동작하도록 만드는 것을 의미한다. 즉, 자바스크립트적 요소를 넣어주는 것이다. 

간단히 과정을 보면 다음과 같다.

> 유저가 페이지에 접속한다 ----> 유저는 순수한 HTML 을 보게 된다. ----> 프레임워크가 자바스크립트 파일을 load 하면서 순수한 HTML 을 React 컴포넌트, Next.js 컴포넌트 로 바꿔준다. ----> 페이지에 동적인 요소가 추가된다.

이런 일련의 과정이 사용자가 인지하지 못 할 정도 순식간에 벌어지기 때문에 사용자는 페이지에 접속을 하자마자 바로 동적인 요소를 포함한 페이지를 볼 수 있게 되는 것이다.

## 2.1 "use client" 의 의미

Next.js는 기본적으로 모든 컴포넌트를 SSR 방식으로 렌더링한다. 그렇다면 `use client` 가 붙은 클라이언트 컴포넌트들은 서버 컴포넌트와 뭐가 다른 것일까? 클라이언트 컴포넌트와 서버 컴포넌트의 가장 큰 차이는 바로 `Hydration` 여부이다. 

클라이언트 컴포넌트는 동적인 요소가 필요하기 때문에 `Hydration` 을 해줘야 하지만, 서버 컴포넌트는 굳이 `Hydration` 을 해주지 않아도 되기 때문에 구분을 하는 것이다. `Hydration` 이란 자바스크립트 파일을 load 하는 것이기 때문에 동적인 요소가 필요하지도 않는데 자바스크립트 파일을 load 하는 과정을 거치는 것은 브라우저 입장에선 낭비이기 때문이다.