# Docker Container

&nbsp;

# 1. 들어가며

도커에 대해서 공부하면 필수적으로 알아야 하는 컨테이너 개념에 대해서 정리해보는 글입니다. 컨테이너 개념은 최근 백엔드 개발과 인프라에 거의 필수적으로 등장하는 개념이므로 잘 공부해두면 좋을 것 같습니다.

&nbsp;

# 2. 컨테이너란 무엇인가?

### 2.1 컨테이너 개념

도커 컨테이너는 이름에서 알 수 있듯이 정말 컨테이너 그 자체입니다. 현실 세계에서 컨테이너는 일반적으로 화물을 담을 때 사용합니다. 도커 컨테이너 역시 무언가를 담는데요, 바로 **애플리케이션**과 **애플리케이션을 실행할 컴퓨터(IP 주소, 컴퓨터 이름, 디스크 드라이브 등등)** 입니다. 

<img width="800" alt="도커 도식1" src="https://github.com/hyunzxn/TIL/assets/100478841/8027c5c0-0c2b-4809-98c2-751148acaa50">

컨테이너는 도커가 생성•관리하는 독립적인 가상 리소스를 가집니다. 조금 더 쉽게 이해하려면 컨테이너 하나가 하나의 독립적인 컴퓨터라고 봐도 좋을 것 같습니다. 

&nbsp;

컨테이너는 호스트 위에서 실행이 됩니다. 여기서 호스트란 사용자의 PC라고 이해하면 될 것 같습니다. 만약 제가 도커를 현재 제가 쓰는 맥북에서 실행하고 있다면 호스트는 제 맥북이 되는 것입니다. 이걸 조금 더 이해하기 쉽게 도식화하면 다음과 같습니다.

<img width="1298" alt="도커 도식2" src="https://github.com/hyunzxn/TIL/assets/100478841/651dfd96-f0c3-43aa-9ab7-a1550d048008">

호스트 컴퓨터는 별도의 호스트명, IP 주소와 디스크를 갖습니다. 모든 컨테이너는 호스트 컴퓨터의 운영체제, CPU, 메모리를 공유합니다. 이 부분이 도커 컨테이너 전에 자주 사용했던 가상머신과의 차이점입니다. 가상 머신을 사용할 때는 각 가상머신마다 운영체제를 가져야 했기 때문에 리소스가 많이 필요하다는 한계점을 지닐 뿐 아니라 운영체제를 설치할 때 필요한 라이선스 비용 등 별도의 부담이 생기게 됩니다. 그러나 도커 컨테이너는 호스트 컴퓨터의 운영체제를 공유하므로 실행도 빠르고 필요한 리소스도 적다는 장점을 가지고 있습니다. 

&nbsp;

### 2.2 컨테이너 특징

컨테이너는 기본적으로 외부 환경에 노출되지 않습니다. 각 컨테이너는 고유한 IP 주소를 갖지만 이것은 도커가 관리하는 내부 가상 네트워크 주소일 뿐 호스트 컴퓨터의 IP 주소와 아무런 상관이 없기 때문에 네트워크적인 측면에서는 외부와 단절돼 있다고 할 수 있습니다.

그렇지만 컨테이너를 외부와 연결할 수 있는 방법이 없는 것은 아닙니다. 컨테이너의 포트를 공개하는 방법으로 외부 환경과 연결할 수 있습니다. 도커 컨테이너의 포트를 열어주고 호스트 컴퓨터의 포트를 주시하고 있다가 만약 해당 포트에 트래픽이 들어온다면 열어준 도커 컨테이너의 포트를 통해 컨테이너로 전달해줄 수 있습니다. 

&nbsp;

도커 명령어 예시를 들면 다음과 같습니다.

> docker container run --detach --publish 8080:80 {도커 이미지 이름}

명령어에 대한 간단한 설명을 해보도록 하겠습니다.

1. --detach: 컨테이너를 백그라운드에서 실행하며 컨테이너 ID를 출력합니다.
2. --publish: 컨테이너의 포트를 호스트 컴퓨터에 공개합니다. 

<img width="800" alt="도식3" src="https://github.com/hyunzxn/TIL/assets/100478841/bd2a8980-71f8-4847-810c-e6497f6bbf06">

&nbsp;

# 3. 마치며

도커를 학습할 때 꼭 알아야 하는 컨테이너의 개념을 알아보았습니다. 앞으로 차차 도커에 관해 정리해보도록 하겠습니다. 